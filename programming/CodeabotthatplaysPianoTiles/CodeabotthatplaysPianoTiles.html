<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <title>How to code a bot that plays Piano Tiles using Python</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300&display=swap" rel="stylesheet">
    <script src="https://use.fontawesome.com/902264e2a2.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3809661025676990" crossorigin="anonymous"></script>
</head>
<body>
    
    <link rel="stylesheet" href="style.css">
    
    <div class="header">

        <div class="HeaderTitle">
            <img src="../Images/logo.png" class="HeaderImage">

            <div class="HeaderName">
                <h1 id="Name">Denis Craciun</h1>
                <span id="Qualify">Web Developer</span>
            </div>
            
        </div>


        
        <div class="HeaderNav">

            <div class="NavBar">
                <a href="../../index.html"><div id="Home">Home</div></a>
                <a href="../../programming/prog.html"><div id="Programming">Programming</div></a>
                <a href="../../cybersecurity/cyber.html"><div id="Cybersecurity">Cybersecurity</div></a>
                <a href="../../about/about.html"><div id="AboutMe">About Me</div></a>
            </div>

            <div class="SearchWrapper">
                <div class="Search">
                    <div class="fa fa-search"></div>
                    <input id ="searchbar" class="search" type="text" placeholder="Search" />
                    <div class="fa fa-times" onclick="DeleteValue()"></div>
                </div>
                <div class="suggested">
                                      
                </div>
            </div>
        </div>

        
        


        <div class="MobileNav">

            <div id="toggle-btn" onclick="showbtn(); showbar()">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <div id="sidebar">
            
                <ul>
                    <a href="../../index.html"><li class="Home">Home</li></a>
                    <a href="../../programming/prog.html"><li>Programming</li></a>
                    <a href="../../cybersecurity/cyber.html"><li>Cybersecurity</li></a>
                    <a href="../../about/about.html"><li>About</li></a>
                </ul>
        
            </div>
        </div>
        
    </div>


    <div class="Title">
        Code a bot that plays Piano Tiles
    </div>


    <div class="Content">
        
        <div class="Article">
            <hr>
            <h3>How are we going to proceed?</h3>
            <hr>
            <img class="ArticleImage" src="TitleImage.png">
            <p>
                Piano Tiles is a very simple game in which you don’t have to do anything but pressing some black rectangles falling down into four different columns. The idea is to create a Python script that checks a specific pixel of every column. If the RGB value of that pixel is equal to (0, 0, 0), which is black, then the mouse button has to be pressed. We could go wild and also use threads to simultaneously check every column and increase the efficiency, but I found that there is no need to do that. As everything will be coded into a while loop, we also want the ability to exit the loop in a simple way, like pressing a key. 
            </p>
            <div class="paragraph">
                <hr>
            <h3>The libraries used</h3>
            <hr>
            <img class="ArticleImage" src="python.png">
            <p>
                First thing we need to do is introduce the libraries that are going to be used. 
                The first one is “pyautogui”, which lets you do lots of actions related to automation, like pressing certain keys, moving the mouse in certain positions, and even recognising an image on the screen. In this scenario we are going to use it in order to recognize the RGB value of a pixel in every column.
                The second one is “time”, which we are going to use in order to wait some milliseconds between the mouse clicks, as them being too fast and consecutive could cause some problems. 
                The third one is “keyboard”, which we are going to use in order to let the script recognize if we are, or not, pressing a certain key. If we are pressing it, then the script needs to leave the while loop. 
                The fourth and fifth ones are “win32api” and “win32con”, which we are going to use for moving the mouse in a certain position, and for clicking and holding the mouse button (pyautogui can also do that, but I find these libraries to be more reliable)
            </p>
            <hr>
                <h3>The script</h3>
            <hr>
            <p>
                First thing we need to do is choose a pixel for every column in the Piano Tiles game. In order to do that we need to know our mouse coordinates, which we can archive with pyautogui and a simple line of code:

            </p>
            <div class="code">
                pyautogui.displayMousePosition()
            </div>
            <p>
                We can leave the y coordinate being the same number as we only care about the x. Once that’s done we can create a function that tells the script how to click.
            </p>
            <div class="code">

                def click(x, y):<br><br>
                <div class="indent">
                    win32api.SetCursorPos((x,y))
                </div>
                <div class="indent">
                    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,0,0)
                </div>
                <div class="indent">
                    time.sleep(0.02)
                </div>
                <div class="indent">
                    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP, 0, 0)
                </div>
            </div>
            <p>
                The first line moves the mouse cursor to our desired position<br>
                The second line triggers the left mouse button the stay down<br>
                The third line tells the script to wait 0.02 seconds (keep in mind that the mouse button is still pressed)<br>
                The fourth line triggers the mouse to release the left button.<br><br>
                Now that the script knows how to click, we can proceed creating the while loop, that will constantly check if the pixel of that column is black or not, and that will stop as soon as we press the “q” key.
            </p>
            <div class="code">
                while keyboard.is_pressed("q") == False:<br><br>
                <div class="indent">
                    if pyautogui.pixel(320, 680)[0] == 0: 
                    <div class="indent2">
                        click(320, 680)
                    </div>
                    <br>
                </div>
                <div class="indent">
                    if pyautogui.pixel(420, 680)[0] == 0: 
                    <div class="indent2">
                        click(420, 680)
                    </div>
                    <br>
                </div>
                <div class="indent">
                    if pyautogui.pixel(520, 680)[0] == 0: 
                    <div class="indent2">
                        click(520, 680)
                    </div>
                    <br>
                </div>
                <div class="indent">
                    if pyautogui.pixel(620, 680)[0] == 0: 
                    <div class="indent2">
                        click(620, 680)
                    </div>
                    <br>
                </div>
            </div>
            <p>
                The if condition inside the while loop checks if the Red value (as we are selecting the first element of a list that has 3 values, Red Green and Blue) of that pixel in the coordinates given in the curly brackets is equal to 0. We are not checking the other values of the Blue or Green because in this case, if the Red value is equal to 0 we already know that a piano key is in that position. So if the Red value of that pixel equals 0, we trigger the click() function with the coordinates of the first column. We repeat that for the other 3 columns and we are done. <br><br>
                We could use threads to check the columns a lot faster but there is no need to as it is fast enough with the while loop.

            </p>
            </div>
            
            
        </div>

    </div>
    


    <footer>

        <div class="FName">
            <h3>Denis Craciun</h3>
        </div>
        <div class="FEmailContainer">
            <div class="FEmail">
                <div class="fa fa-envelope"></div>
                <div class="FEmailName">deniscraciun18@icloud.com</div>
            </div>
        </div>
        <div class="FFollowContainer">
            <div class="FFollow">
                <div class="FFollowMessage" >Follow me on:</div>
                <a href="https://www.instagram.com/_deniscraciun_/" target="_blank"><div class="fa fa-instagram"></div></a>
                <a href="https://github.com/DenisCraciunGabriel" target="_blank"><div class="fa fa-github"></div></a>
                <a href="https://twitter.com/deniscraciun4" target="_blank"><div class="fa fa-twitter"></div></a>
            </div>
        </div>

    </footer>

    <div class="copyright">
        Copyright © 2021 Denis Craciun All Rights Reserved.
    </div>


    <script src="../../SCRIPTS.js"></script>
</body>
</html>